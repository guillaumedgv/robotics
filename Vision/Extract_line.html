<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Extraction de lignes</title>
  <link rel="stylesheet" href="../style.css">
</head>
<body>

  <!-- Navbar dynamique -->
  <div id="navbar"></div>

  <!-- --- MathJax for LaTeX equations --- -->
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>

  <script>
  // Load navbar dynamically from external file
  fetch("navbar_vision.html")
    .then(response => response.text())  // Read the content as text
    .then(data => {
      // Insert the navbar HTML into the page
      document.getElementById("navbar").innerHTML = data;

      // ----------------------------
      // Highlight the current page
      // ----------------------------
      const currentPath = window.location.pathname;  // e.g., "/index.html"
      const links = document.querySelectorAll("#navbar nav a"); // all nav links

      links.forEach(link => {
        const href = link.getAttribute("href");
        if (!href) return; // Skip links without href

        // Normalize paths (remove leading slash) to compare properly
        const normalizedHref = href.replace(/^\//, "");
        const normalizedPath = currentPath.replace(/^\//, "");

        if (normalizedPath.endsWith(normalizedHref)) {
          // âœ… Mark link of current page as active
          link.classList.add("active");

          // If the link is in a submenu, also highlight its parent
          const parentLi = link.closest("ul")?.closest("li");
          if (parentLi) {
            const parentLink = parentLi.querySelector(":scope > a");
            if (parentLink) parentLink.classList.add("active-parent");
          }
        } else {
          // Remove active class from other links
          link.classList.remove("active");
        }
      });

      // ----------------------------
      // Night mode toggle button
      // ----------------------------
      const themeToggle = document.getElementById("themeToggle");

      // On page load, check if user previously enabled night mode
      if (localStorage.getItem("nightMode") === "true") {
        document.body.classList.add("night");
        if (themeToggle) themeToggle.textContent = "â˜€ï¸ Day Mode";
      }

      // Set up click listener for the button
      if (themeToggle) {
        themeToggle.addEventListener("click", () => {
          document.body.classList.toggle("night"); // Toggle night mode

          // Save current mode in localStorage to persist across pages
          const isNight = document.body.classList.contains("night");
          localStorage.setItem("nightMode", isNight);

          // Update button text based on current mode
          themeToggle.textContent = isNight ? "â˜€ï¸ Day Mode" : "ðŸŒ™ Night Mode";
        });
      }
    })
    .catch(error => console.error("Erreur chargement navbar :", error));
</script>


<div class="container">
    <!-- Contenu principal -->
    <aside class="sidebar">
      <h3>Vision par Ordinateur</h3>
      <ul>
        <ul>
        <li><a href="Transformation_Morpho.html">Transformation Morphologique</a></li>
        <li><a href="Pattern_Reconnaissance.html">Reconnaissance de motifs </a></li>
        <li><a href="Derive.html">DÃ©rivÃ©</a></li>
        <li><a href="Contours.html">Extraction des contours</a></li>
        <li><a href="Hough.html">TransformÃ© de Hough </a></li>
        <li><a href="Extract_line.html" class="active">Extraction de lignes</a></li>
        <li><a href="Convex_hull.html">Enveloppe convexe</a></li>
        <li><a href="polygone.html">Distance aux contours & Moments</a></li>
        <li><a href="remapping.html">Remapping</a></li>
        <li><a href="affine_dft.html" >Transformation affine & DFT</a></li>
        <li><a href="Watershed.html">Algorithme Watershed</a></li>

      </ul>
      </ul>
    </aside> 

    <main class="content">

        <h1> Extraction de lignes </h1>

       <p>
        Le kernel dÃ©finit la <strong>forme</strong> que lâ€™on souhaite conserver dans lâ€™image. Lors de lâ€™Ã©rosion,
        un pixel blanc est conservÃ© uniquement si lâ€™ensemble du kernel peut Â« tenir Â» sur une zone blanche.
        Autrement dit, seules les structures de lâ€™image ayant une forme compatible avec le kernel survivent.
        </p>

        <p>
        Lorsque lâ€™on choisit un <strong>kernel en forme de ligne</strong>, lâ€™opÃ©ration devient directionnelle.
        Un kernel <strong>vertical</strong> (largeur 1, grande hauteur) permet de conserver les structures
        verticales, tandis que les lignes horizontales, trop fines dans cette direction, sont supprimÃ©es.
        </p>

        <p>
            Plus un kernel est grand en taille moins l'extraction est prÃ©cise
        </p>

        <p>
        AprÃ¨s lâ€™Ã©rosion, la dilatation est appliquÃ©e avec le mÃªme kernel. Elle permet de
        <strong>restaurer lâ€™Ã©paisseur</strong> des structures qui ont survÃ©cu Ã  lâ€™Ã©rosion, sans faire rÃ©apparaÃ®tre
        celles qui ont Ã©tÃ© Ã©liminÃ©es. Pour lâ€™enchaÃ®nement Ã©rosion + dilatation on parle aussi d'ouverture
        (voir <a href="Transformation_Morpho.html">Transformation Morphologique</a>).
        </p>

        <p>
        Ainsi, pour <strong>supprimer les lignes verticales</strong>, on utilise un <strong>kernel horizontal</strong>,
        car seules les structures horizontales correspondent Ã  sa forme et survivent.
        Inversement, pour extraire ou conserver les lignes verticales, on utilise un
        <strong>kernel vertical</strong>.
        </p>

        <img src="ligne.jpg"> 
        <div class="legend">
            <p>
                Avant et aprÃ¨s l'extraction de ligne <b>Vertical</b> 
            </p>
        </div>


        <details>    
        <summary> <b style="color: red;">Extraction de ligne vertical en Python</b>
            </summary>
        <pre><button class="copy-btn" onclick="copyCode()">Copier</button><code id="code-block">

import numpy as np
import sys
import cv2 as cv
import matplotlib.pyplot as plt


# load the image
src = cv.imread('note.png', cv.IMREAD_GRAYSCALE)

# Transform source image to gray if it is not already
if len(src.shape) != 2:
    gray = cv.cvtColor(src, cv.COLOR_BGR2GRAY)
else:
    gray = src

plt.imshow(gray, cmap = 'gray')
plt.axis('off')  # Hide axes
plt.show()


# binarise l'image
_,thresh = cv.threshold(gray,210,255,cv.THRESH_BINARY)
thresh = ~thresh # inverse l'intensitÃ© --> objet toujour blanc

res = np.copy(thresh)

plt.imshow(thresh, cmap = 'gray')
plt.axis('off')  # Hide axes
plt.show()

vertical = np.copy(thresh) 
# Specify size on vertical axis
rows = vertical.shape[0]
vertical_size =  rows//50
print(vertical_size)
    # Create structure element for extracting vertical lines through morphology operations
verticalStructure = cv.getStructuringElement(cv.MORPH_RECT, (1, vertical_size))
    # Apply morphology operations
vertical = cv.erode(vertical, verticalStructure)
vertical = cv.erode(vertical, verticalStructure)
vertical = cv.erode(vertical, verticalStructure)
vertical = cv.dilate(vertical, verticalStructure)
    # Show extracted vertical lines
plt.imshow(vertical, cmap = 'gray')
plt.axis('off')  # Hide axes
plt.show()
            </code></pre>
        </details>



    </main>
</div>

<footer>
    Â© 2025 - Guillaume Dengreville
</footer>

</body>

</html>

